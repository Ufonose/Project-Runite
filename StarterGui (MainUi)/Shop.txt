local module = {}

function module.LOAD(MODULE_INFO)
	-- Basic Needs
	local MODULES = MODULE_INFO["MODULES"]
	local SERVICES = MODULE_INFO["SERVICES"]
	-- Services
	local RepStorage = SERVICES["ReplicatedStorage"]
	local Plrs = SERVICES["Players"]
	-- Modules
	local PLACEMENT = MODULES["Placement"]
	local CASH_LIB = MODULES["CashLib"]
	local Main = MODULES["Main"]
	local SoundManager = require(RepStorage.Modules.SoundManager)
	-- Plr Info
	local Plr = Plrs.LocalPlayer
	-- Services for mobile control management
	local GuiService = game:GetService("GuiService")
	local UserInputService = game:GetService("UserInputService")
	-- Check if player is on mobile device
	local isMobile = UserInputService.TouchEnabled and not UserInputService.KeyboardEnabled
	-- Variables
	local DB = true
	local AMOUNT = 1
	local CURRENT_COST = 0
	local CURRENT_TAB = "AllTab"
	local SELECTED_ITEM
	local INV
	local LOAD_SHOP  -- Forward declaration
	local searchBox  -- Forward declaration for search box

	-- Create main shop frame with modern styling - RESPONSIVE (ORIGINAL SIZE)
	local shopFrame = Instance.new("Frame")
	shopFrame.Name = "ShopFrame"
	-- Detect screen size and adjust GUI size for mobile
	local function updateShopSize()
		local viewport = workspace.CurrentCamera.ViewportSize
		local screenWidth = viewport.X

		if screenWidth < 900 then
			shopFrame.Size = UDim2.new(1.5, 0, 1.35, 0)  -- Original mobile size
		else
			shopFrame.Size = UDim2.new(1.2, 0, 1.3, 0)  -- Original desktop size
		end
	end

	updateShopSize()
	workspace.CurrentCamera:GetPropertyChangedSignal("ViewportSize"):Connect(updateShopSize)

	shopFrame.Position = UDim2.new(1, 0, 1, 0)
	shopFrame.AnchorPoint = Vector2.new(1, 1)
	shopFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
	shopFrame.BackgroundTransparency = 0.1
	shopFrame.BorderSizePixel = 0
	shopFrame.Visible = false
	shopFrame.ZIndex = 5
	shopFrame.Parent = script.Parent

	local aspectRatio = Instance.new("UIAspectRatioConstraint")
	aspectRatio.AspectRatio = 0.78  -- Wider to accommodate sidebar without shrinking items
	aspectRatio.DominantAxis = Enum.DominantAxis.Height
	aspectRatio.Parent = shopFrame

	-- Blur/Glass effect background
	local blur = Instance.new("Frame")
	blur.Size = UDim2.new(1, 0, 1, 0)
	blur.BackgroundColor3 = Color3.fromRGB(15, 15, 20)
	blur.BackgroundTransparency = 0.3
	blur.BorderSizePixel = 0
	blur.ZIndex = 6
	blur.Parent = shopFrame

	local blurCorner = Instance.new("UICorner")
	blurCorner.CornerRadius = UDim.new(0, 15)
	blurCorner.Parent = blur

	local stroke = Instance.new("UIStroke")
	stroke.Color = Color3.fromRGB(60, 60, 80)
	stroke.Thickness = 2
	stroke.Transparency = 0.5
	stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
	stroke.Parent = shopFrame

	local shopCorner = Instance.new("UICorner")
	shopCorner.CornerRadius = UDim.new(0, 15)
	shopCorner.Parent = shopFrame

	-- Title bar
	local titleBar = Instance.new("Frame")
	titleBar.Name = "TitleBar"
	titleBar.Size = UDim2.new(1, 0, 0.0556, 0)
	titleBar.BackgroundColor3 = Color3.fromRGB(20, 20, 25)
	titleBar.BorderSizePixel = 0
	titleBar.ZIndex = 7
	titleBar.Parent = shopFrame

	local titleCorner = Instance.new("UICorner")
	titleCorner.CornerRadius = UDim.new(0, 15)
	titleCorner.Parent = titleBar

	local titleCover = Instance.new("Frame")
	titleCover.Size = UDim2.new(1, 0, 0.3, 0)
	titleCover.Position = UDim2.new(0, 0, 1, 0)
	titleCover.AnchorPoint = Vector2.new(0, 1)
	titleCover.BackgroundColor3 = Color3.fromRGB(20, 20, 25)
	titleCover.BorderSizePixel = 0
	titleCover.ZIndex = 7
	titleCover.Parent = titleBar

	local titleText = Instance.new("TextLabel")
	titleText.Size = UDim2.new(0.7857, 0, 1, 0)
	titleText.Position = UDim2.new(0.1071, 0, 0, 0)
	titleText.BackgroundTransparency = 1
	titleText.Text = "Shop"
	titleText.TextColor3 = Color3.fromRGB(255, 255, 255)
	titleText.TextSize = 28
	titleText.Font = Enum.Font.GothamBold
	titleText.TextXAlignment = Enum.TextXAlignment.Center
	titleText.TextScaled = true
	titleText.ZIndex = 8
	titleText.Parent = titleBar

	local titleTextConstraint = Instance.new("UITextSizeConstraint")
	titleTextConstraint.MaxTextSize = 28
	titleTextConstraint.Parent = titleText

	-- Close button
	local closeButton = Instance.new("TextButton")
	closeButton.Size = UDim2.new(0.0714, 0, 0.8, 0)
	closeButton.Position = UDim2.new(0.9196, 0, 0.1, 0)
	closeButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
	closeButton.Text = "X"
	closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
	closeButton.TextSize = 22
	closeButton.Font = Enum.Font.GothamBold
	closeButton.TextScaled = true
	closeButton.ZIndex = 8
	closeButton.Parent = titleBar

	local closeTextConstraint = Instance.new("UITextSizeConstraint")
	closeTextConstraint.MaxTextSize = 22
	closeTextConstraint.Parent = closeButton

	local closeCorner = Instance.new("UICorner")
	closeCorner.CornerRadius = UDim.new(0, 10)
	closeCorner.Parent = closeButton

	local closeStroke = Instance.new("UIStroke")
	closeStroke.Color = Color3.fromRGB(0, 0, 0)
	closeStroke.Thickness = 1
	closeStroke.Transparency = 0.7
	closeStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
	closeStroke.Parent = closeButton

	local function updateCloseButtonSize()
		local viewport = workspace.CurrentCamera.ViewportSize
		local screenWidth = viewport.X

		if screenWidth < 900 then
			closeButton.Size = UDim2.new(0.107, 0, 1.2, 0)
			closeButton.Position = UDim2.new(0.88, 0, -0.1, 0)
		else
			closeButton.Size = UDim2.new(0.0714, 0, 0.8, 0)
			closeButton.Position = UDim2.new(0.9196, 0, 0.1, 0)
		end
	end

	updateCloseButtonSize()
	workspace.CurrentCamera:GetPropertyChangedSignal("ViewportSize"):Connect(updateCloseButtonSize)

	closeButton.MouseButton1Click:Connect(function()
		Main.CLOSE_MENU(script.Parent)
		shopFrame.Visible = false
	end)

	-- ==================== ITEMS CONTAINER ====================
	local itemsContainer = Instance.new("Frame")
	itemsContainer.Name = "ItemsContainer"
	itemsContainer.Size = UDim2.new(1, 0, 1, 0)
	itemsContainer.Position = UDim2.new(0, 0, 0, 0)
	itemsContainer.BackgroundTransparency = 1
	itemsContainer.Visible = true
	itemsContainer.ZIndex = 7
	itemsContainer.Parent = shopFrame

	-- ==================== TAB BUTTONS BACKGROUND FRAME (Outside itemsContainer) ====================
	local tabButtonsBackground = Instance.new("Frame")
	tabButtonsBackground.Name = "TabButtonsBackground"
	tabButtonsBackground.Size = UDim2.new(0.76, 0, 0.055, 0)
	tabButtonsBackground.Position = UDim2.new(0.2, 0, 0.065, 0)  -- Moved up to align with sidebar
	tabButtonsBackground.BackgroundColor3 = Color3.fromRGB(30, 30, 35)
	tabButtonsBackground.BackgroundTransparency = 0.3
	tabButtonsBackground.BorderSizePixel = 0
	tabButtonsBackground.ZIndex = 7
	tabButtonsBackground.Parent = shopFrame  -- Changed to shopFrame

	local tabBgCorner = Instance.new("UICorner")
	tabBgCorner.CornerRadius = UDim.new(0, 12)
	tabBgCorner.Parent = tabButtonsBackground

	local tabBgStroke = Instance.new("UIStroke")
	tabBgStroke.Color = Color3.fromRGB(60, 60, 80)
	tabBgStroke.Thickness = 1
	tabBgStroke.Transparency = 0.6
	tabBgStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
	tabBgStroke.Parent = tabButtonsBackground

	-- Padding inside the background frame
	local tabBgPadding = Instance.new("UIPadding")
	tabBgPadding.PaddingTop = UDim.new(0.1, 0)
	tabBgPadding.PaddingBottom = UDim.new(0.1, 0)
	tabBgPadding.PaddingLeft = UDim.new(0.015, 0)
	tabBgPadding.PaddingRight = UDim.new(0.015, 0)
	tabBgPadding.Parent = tabButtonsBackground

	-- ==================== ITEMS TAB BUTTON ====================
	local itemsTabButton = Instance.new("TextButton")
	itemsTabButton.Name = "ItemsTab"
	itemsTabButton.Size = UDim2.new(0.485, 0, 0.8, 0)
	itemsTabButton.Position = UDim2.new(0, 0, 0.1, 0)
	itemsTabButton.BackgroundColor3 = Color3.fromRGB(100, 70, 140)
	itemsTabButton.Text = "ðŸ›’ Items"
	itemsTabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
	itemsTabButton.TextSize = 16
	itemsTabButton.Font = Enum.Font.GothamBold
	itemsTabButton.TextScaled = true
	itemsTabButton.ZIndex = 8
	itemsTabButton.Parent = tabButtonsBackground

	local itemsTabConstraint = Instance.new("UITextSizeConstraint")
	itemsTabConstraint.MaxTextSize = 16
	itemsTabConstraint.Parent = itemsTabButton

	local itemsTabCorner = Instance.new("UICorner")
	itemsTabCorner.CornerRadius = UDim.new(0, 10)
	itemsTabCorner.Parent = itemsTabButton

	local itemsTabStroke = Instance.new("UIStroke")
	itemsTabStroke.Color = Color3.fromRGB(0, 0, 0)
	itemsTabStroke.Thickness = 2
	itemsTabStroke.Transparency = 0.7
	itemsTabStroke.Parent = itemsTabButton

	-- ==================== UPGRADES TAB BUTTON ====================
	local upgradesTabButton = Instance.new("TextButton")
	upgradesTabButton.Name = "UpgradesTab"
	upgradesTabButton.Size = UDim2.new(0.485, 0, 0.8, 0)
	upgradesTabButton.Position = UDim2.new(0.515, 0, 0.1, 0)
	upgradesTabButton.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
	upgradesTabButton.Text = "âš¡ Upgrades"
	upgradesTabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
	upgradesTabButton.TextSize = 16
	upgradesTabButton.Font = Enum.Font.GothamBold
	upgradesTabButton.TextScaled = true
	upgradesTabButton.ZIndex = 8
	upgradesTabButton.Parent = tabButtonsBackground

	local upgradesTabConstraint = Instance.new("UITextSizeConstraint")
	upgradesTabConstraint.MaxTextSize = 16
	upgradesTabConstraint.Parent = upgradesTabButton

	local upgradesTabCorner = Instance.new("UICorner")
	upgradesTabCorner.CornerRadius = UDim.new(0, 10)
	upgradesTabCorner.Parent = upgradesTabButton

	local upgradesTabStroke = Instance.new("UIStroke")
	upgradesTabStroke.Color = Color3.fromRGB(0, 0, 0)
	upgradesTabStroke.Thickness = 2
	upgradesTabStroke.Transparency = 0.7
	upgradesTabStroke.Parent = upgradesTabButton

	-- ==================== LEFT SIDEBAR - CATEGORIES WITH SEARCH ====================
	local categoryFrame = Instance.new("Frame")
	categoryFrame.Name = "CategorySidebar"
	categoryFrame.Size = UDim2.new(0.15, 0, 0.915, 0)  -- Taller to fill more space
	categoryFrame.Position = UDim2.new(0.0357, 0, 0.065, 0)  -- Moved up
	categoryFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 35)
	categoryFrame.BackgroundTransparency = 0.3
	categoryFrame.BorderSizePixel = 0
	categoryFrame.ZIndex = 7
	categoryFrame.Parent = itemsContainer

	local categoryCorner = Instance.new("UICorner")
	categoryCorner.CornerRadius = UDim.new(0, 12)
	categoryCorner.Parent = categoryFrame

	local categoryStroke = Instance.new("UIStroke")
	categoryStroke.Color = Color3.fromRGB(60, 60, 80)
	categoryStroke.Thickness = 1
	categoryStroke.Transparency = 0.6
	categoryStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
	categoryStroke.Parent = categoryFrame

	local categoryPadding = Instance.new("UIPadding")
	categoryPadding.PaddingTop = UDim.new(0.012, 0)  -- Small padding to align with Items button
	categoryPadding.PaddingBottom = UDim.new(0.02, 0)
	categoryPadding.PaddingLeft = UDim.new(0.05, 0)
	categoryPadding.PaddingRight = UDim.new(0.05, 0)
	categoryPadding.Parent = categoryFrame

	-- Layout for all items including search bar
	local categoryLayout = Instance.new("UIListLayout")
	categoryLayout.FillDirection = Enum.FillDirection.Vertical
	categoryLayout.Padding = UDim.new(0.01, 0)  -- Small gap between items
	categoryLayout.SortOrder = Enum.SortOrder.LayoutOrder
	categoryLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
	categoryLayout.Parent = categoryFrame

	-- Search bar inside category sidebar (now part of layout)
	local searchFrame = Instance.new("Frame")
	searchFrame.Name = "SearchFrame"
	searchFrame.Size = UDim2.new(0.9, 0, 0.045, 0)  -- Scale-based height
	searchFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 40)
	searchFrame.BorderSizePixel = 0
	searchFrame.ZIndex = 8
	searchFrame.LayoutOrder = -2  -- Put search bar first
	searchFrame.Parent = categoryFrame

	local searchCorner = Instance.new("UICorner")
	searchCorner.CornerRadius = UDim.new(0, 10)
	searchCorner.Parent = searchFrame

	local searchStroke = Instance.new("UIStroke")
	searchStroke.Color = Color3.fromRGB(60, 60, 80)
	searchStroke.Thickness = 1
	searchStroke.Transparency = 0.6
	searchStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
	searchStroke.Parent = searchFrame

	local searchIcon = Instance.new("TextLabel")
	searchIcon.Size = UDim2.new(0.2, 0, 1, 0)
	searchIcon.Position = UDim2.new(0.05, 0, 0, 0)
	searchIcon.BackgroundTransparency = 1
	searchIcon.Text = "ðŸ”"
	searchIcon.TextSize = 14
	searchIcon.TextScaled = true
	searchIcon.ZIndex = 9
	searchIcon.Parent = searchFrame

	local searchIconConstraint = Instance.new("UITextSizeConstraint")
	searchIconConstraint.MaxTextSize = 14
	searchIconConstraint.Parent = searchIcon

	searchBox = Instance.new("TextBox")
	searchBox.Size = UDim2.new(0.65, 0, 1, 0)
	searchBox.Position = UDim2.new(0.25, 0, 0, 0)
	searchBox.BackgroundTransparency = 1
	searchBox.Text = ""
	searchBox.PlaceholderText = "Search..."
	searchBox.TextColor3 = Color3.fromRGB(255, 255, 255)
	searchBox.PlaceholderColor3 = Color3.fromRGB(120, 120, 120)
	searchBox.TextSize = 11
	searchBox.Font = Enum.Font.Gotham
	searchBox.TextXAlignment = Enum.TextXAlignment.Left
	searchBox.TextScaled = true
	searchBox.ClearTextOnFocus = false
	searchBox.ZIndex = 9
	searchBox.Parent = searchFrame

	local searchBoxConstraint = Instance.new("UITextSizeConstraint")
	searchBoxConstraint.MaxTextSize = 11
	searchBoxConstraint.Parent = searchBox

	local clearButton = Instance.new("TextButton")
	clearButton.Size = UDim2.new(0.15, 0, 0.7, 0)
	clearButton.Position = UDim2.new(0.8, 0, 0.15, 0)
	clearButton.BackgroundColor3 = Color3.fromRGB(50, 50, 55)
	clearButton.Text = "X"
	clearButton.TextColor3 = Color3.fromRGB(200, 200, 200)
	clearButton.TextSize = 12
	clearButton.Font = Enum.Font.GothamBold
	clearButton.TextScaled = true
	clearButton.Visible = false
	clearButton.ZIndex = 9
	clearButton.Parent = searchFrame

	local clearTextConstraint = Instance.new("UITextSizeConstraint")
	clearTextConstraint.MaxTextSize = 12
	clearTextConstraint.Parent = clearButton

	local clearCorner = Instance.new("UICorner")
	clearCorner.CornerRadius = UDim.new(1, 0)
	clearCorner.Parent = clearButton

	clearButton.MouseButton1Click:Connect(function()
		searchBox.Text = ""
	end)

	-- "All" button
	local allButton = Instance.new("TextButton")
	allButton.Name = "AllTab"
	allButton.Size = UDim2.new(0.9, 0, 0.045, 0)  -- Scale-based height
	allButton.BackgroundColor3 = Color3.fromRGB(100, 70, 140)
	allButton.Text = "All"
	allButton.TextColor3 = Color3.fromRGB(255, 255, 255)
	allButton.TextSize = 13  -- Slightly smaller text
	allButton.Font = Enum.Font.GothamBold
	allButton.TextScaled = true
	allButton.LayoutOrder = -1  -- Right after search bar
	allButton.ZIndex = 8
	allButton.Parent = categoryFrame

	local allTextConstraint = Instance.new("UITextSizeConstraint")
	allTextConstraint.MaxTextSize = 13  -- Smaller max size
	allTextConstraint.Parent = allButton

	local allCorner = Instance.new("UICorner")
	allCorner.CornerRadius = UDim.new(0, 10)
	allCorner.Parent = allButton

	local allStroke = Instance.new("UIStroke")
	allStroke.Color = Color3.fromRGB(0, 0, 0)
	allStroke.Thickness = 1
	allStroke.Transparency = 0.7
	allStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
	allStroke.Parent = allButton

	-- Category buttons data
	local categories = {
		{Name = "MineTab", Display = "Conveyors", Color = Color3.fromRGB(70, 100, 140)},
		{Name = "MachineTab", Display = "Machines", Color = Color3.fromRGB(16, 71, 60)},	
		{Name = "DecorTab", Display = "Decor", Color = Color3.fromRGB(140, 100, 70)},
	}

	local categoryButtons = {}

	-- Create category buttons
	for i, category in pairs(categories) do
		local tabButton = Instance.new("TextButton")
		tabButton.Name = category.Name
		tabButton.Size = UDim2.new(0.9, 0, 0.045, 0)  -- Scale-based height
		tabButton.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
		tabButton.Text = category.Display
		tabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
		tabButton.TextSize = 13  -- Smaller text
		tabButton.Font = Enum.Font.GothamBold
		tabButton.TextScaled = true
		tabButton.LayoutOrder = i
		tabButton.ZIndex = 8
		tabButton.Parent = categoryFrame

		local tabTextConstraint = Instance.new("UITextSizeConstraint")
		tabTextConstraint.MaxTextSize = 13  -- Smaller max size
		tabTextConstraint.Parent = tabButton

		local tabCorner = Instance.new("UICorner")
		tabCorner.CornerRadius = UDim.new(0, 10)
		tabCorner.Parent = tabButton

		local tabStroke = Instance.new("UIStroke")
		tabStroke.Color = Color3.fromRGB(0, 0, 0)
		tabStroke.Thickness = 1
		tabStroke.Transparency = 0.7
		tabStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
		tabStroke.Parent = tabButton

		table.insert(categoryButtons, tabButton)

		tabButton.MouseButton1Click:Connect(function()
			--SoundManager.ButtonClick()
			CURRENT_TAB = category.Name
			allButton.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
			for j, btn in pairs(categoryButtons) do
				btn.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
			end
			tabButton.BackgroundColor3 = category.Color
			LOAD_SHOP()
		end)
	end

	allButton.MouseButton1Click:Connect(function()
		--SoundManager.ButtonClick()
		CURRENT_TAB = "AllTab"
		allButton.BackgroundColor3 = Color3.fromRGB(100, 70, 140)
		for _, btn in pairs(categoryButtons) do
			btn.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
		end
		LOAD_SHOP()
	end)

	-- ==================== ITEMS SCROLL (RIGHT SIDE) ====================
	local itemsScroll = Instance.new("ScrollingFrame")
	itemsScroll.Name = "ItemsScroll"
	itemsScroll.Size = UDim2.new(0.76, 0, 0.67, 0)  -- Slightly shorter to maintain padding
	itemsScroll.Position = UDim2.new(0.2, 0, 0.128, 0)  -- Starts right after tab buttons
	itemsScroll.BackgroundColor3 = Color3.fromRGB(30, 30, 35)
	itemsScroll.BackgroundTransparency = 0.3
	itemsScroll.BorderSizePixel = 0
	itemsScroll.ScrollBarThickness = 10
	itemsScroll.ScrollBarImageColor3 = Color3.fromRGB(100, 100, 105)
	itemsScroll.ZIndex = 7
	itemsScroll.Parent = itemsContainer

	local itemsCorner = Instance.new("UICorner")
	itemsCorner.CornerRadius = UDim.new(0, 12)
	itemsCorner.Parent = itemsScroll

	local itemsStroke = Instance.new("UIStroke")
	itemsStroke.Color = Color3.fromRGB(60, 60, 80)
	itemsStroke.Thickness = 1
	itemsStroke.Transparency = 0.6
	itemsStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
	itemsStroke.Parent = itemsScroll

	local itemsGrid = Instance.new("UIGridLayout")
	itemsGrid.SortOrder = Enum.SortOrder.LayoutOrder
	itemsGrid.Parent = itemsScroll

	local function updateGridSize()
		local viewport = workspace.CurrentCamera.ViewportSize
		local screenWidth = viewport.X
		local scrollWidth = itemsScroll.AbsoluteSize.X

		local numColumns = (screenWidth < 900) and 2 or 3
		local cellWidth = (scrollWidth - 30) / numColumns - 10
		local cellHeight = cellWidth / 0.7381

		itemsGrid.CellSize = UDim2.new(0, cellWidth, 0, cellHeight)
		itemsGrid.CellPadding = UDim2.new(0, 10, 0, 10)
	end

	updateGridSize()
	itemsScroll:GetPropertyChangedSignal("AbsoluteSize"):Connect(updateGridSize)

	local itemsPadding = Instance.new("UIPadding")
	itemsPadding.PaddingTop = UDim.new(0.027, 0)
	itemsPadding.PaddingBottom = UDim.new(0.027, 0)
	itemsPadding.PaddingLeft = UDim.new(0.0288, 0)
	itemsPadding.PaddingRight = UDim.new(0.0288, 0)
	itemsPadding.Parent = itemsScroll

	-- ==================== SELECTED ITEM PANEL ====================
	local selectedPanel = Instance.new("Frame")
	selectedPanel.Name = "SelectedPanel"
	selectedPanel.Size = UDim2.new(0.76, 0, 0.17, 0)  -- Adjusted height
	selectedPanel.Position = UDim2.new(0.2, 0, 0.810, 0)  -- Moved higher with padding gap
	selectedPanel.BackgroundColor3 = Color3.fromRGB(30, 30, 35)
	selectedPanel.BackgroundTransparency = 0.2
	selectedPanel.BorderSizePixel = 0
	selectedPanel.Visible = false
	selectedPanel.ZIndex = 7
	selectedPanel.Parent = itemsContainer

	local selectedCorner = Instance.new("UICorner")
	selectedCorner.CornerRadius = UDim.new(0, 12)
	selectedCorner.Parent = selectedPanel

	local selectedStroke = Instance.new("UIStroke")
	selectedStroke.Color = Color3.fromRGB(60, 60, 80)
	selectedStroke.Thickness = 1
	selectedStroke.Transparency = 0.6
	selectedStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
	selectedStroke.Parent = selectedPanel

	local selectedIcon = Instance.new("ImageLabel")
	selectedIcon.Size = UDim2.new(0.2885, 0, 0.8824, 0)
	selectedIcon.Position = UDim2.new(0.0192, 0, 0.0588, 0)
	selectedIcon.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
	selectedIcon.BorderSizePixel = 0
	selectedIcon.ZIndex = 8
	selectedIcon.Parent = selectedPanel

	local selectedIconCorner = Instance.new("UICorner")
	selectedIconCorner.CornerRadius = UDim.new(0, 12)
	selectedIconCorner.Parent = selectedIcon

	local infoContainer = Instance.new("Frame")
	infoContainer.Size = UDim2.new(0.6538, 0, 0.8824, 0)
	infoContainer.Position = UDim2.new(0.3269, 0, 0.0588, 0)
	infoContainer.BackgroundTransparency = 1
	infoContainer.ZIndex = 8
	infoContainer.Parent = selectedPanel

	local selectedName = Instance.new("TextLabel")
	selectedName.Size = UDim2.new(1, 0, 0.1467, 0)
	selectedName.Position = UDim2.new(0, 0, 0, 0)
	selectedName.BackgroundTransparency = 1
	selectedName.Text = "Item Name"
	selectedName.TextColor3 = Color3.fromRGB(255, 255, 255)
	selectedName.TextSize = 16
	selectedName.Font = Enum.Font.GothamBold
	selectedName.TextXAlignment = Enum.TextXAlignment.Left
	selectedName.TextTruncate = Enum.TextTruncate.AtEnd
	selectedName.TextScaled = true
	selectedName.ZIndex = 9
	selectedName.Parent = infoContainer

	local selectedNameConstraint = Instance.new("UITextSizeConstraint")
	selectedNameConstraint.MaxTextSize = 16
	selectedNameConstraint.Parent = selectedName

	local selectedTier = Instance.new("TextLabel")
	selectedTier.Size = UDim2.new(1, 0, 0.1067, 0)
	selectedTier.Position = UDim2.new(0, 0, 0.16, 0)
	selectedTier.BackgroundTransparency = 1
	selectedTier.Text = "First Age"
	selectedTier.TextColor3 = Color3.fromRGB(150, 150, 200)
	selectedTier.TextSize = 12
	selectedTier.Font = Enum.Font.Gotham
	selectedTier.TextXAlignment = Enum.TextXAlignment.Left
	selectedTier.TextScaled = true
	selectedTier.ZIndex = 9
	selectedTier.Parent = infoContainer

	local selectedTierConstraint = Instance.new("UITextSizeConstraint")
	selectedTierConstraint.MaxTextSize = 12
	selectedTierConstraint.Parent = selectedTier

	local selectedDesc = Instance.new("TextLabel")
	selectedDesc.Size = UDim2.new(1, 0, 0.2333, 0)
	selectedDesc.Position = UDim2.new(0, 0, 0.2867, 0)
	selectedDesc.BackgroundTransparency = 1
	selectedDesc.Text = "Description here"
	selectedDesc.TextColor3 = Color3.fromRGB(180, 180, 190)
	selectedDesc.TextSize = 11
	selectedDesc.Font = Enum.Font.Gotham
	selectedDesc.TextWrapped = true
	selectedDesc.TextXAlignment = Enum.TextXAlignment.Left
	selectedDesc.TextYAlignment = Enum.TextYAlignment.Top
	selectedDesc.TextScaled = true
	selectedDesc.ZIndex = 9
	selectedDesc.Parent = infoContainer

	local selectedDescConstraint = Instance.new("UITextSizeConstraint")
	selectedDescConstraint.MaxTextSize = 11
	selectedDescConstraint.Parent = selectedDesc

	local controlsRow = Instance.new("Frame")
	controlsRow.Size = UDim2.new(1, 0, 0.4667, 0)
	controlsRow.Position = UDim2.new(0, 0, 0.5333, 0)
	controlsRow.BackgroundTransparency = 1
	controlsRow.ZIndex = 9
	controlsRow.Parent = infoContainer

	local amountFrame = Instance.new("Frame")
	amountFrame.Size = UDim2.new(0.3235, 0, 1, 0)
	amountFrame.Position = UDim2.new(0, 0, 0, 0)
	amountFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
	amountFrame.BackgroundTransparency = 0.3
	amountFrame.BorderSizePixel = 0
	amountFrame.ZIndex = 10
	amountFrame.Parent = controlsRow

	local amountCorner = Instance.new("UICorner")
	amountCorner.CornerRadius = UDim.new(0, 10)
	amountCorner.Parent = amountFrame

	local amountStroke = Instance.new("UIStroke")
	amountStroke.Color = Color3.fromRGB(60, 60, 80)
	amountStroke.Thickness = 1
	amountStroke.Transparency = 0.6
	amountStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
	amountStroke.Parent = amountFrame

	local decreaseBtn = Instance.new("TextButton")
	decreaseBtn.Size = UDim2.new(0.2727, 0, 1, 0)
	decreaseBtn.Position = UDim2.new(0, 0, 0, 0)
	decreaseBtn.BackgroundTransparency = 1
	decreaseBtn.Text = "âˆ’"
	decreaseBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
	decreaseBtn.TextSize = 20
	decreaseBtn.Font = Enum.Font.GothamBold
	decreaseBtn.TextScaled = true
	decreaseBtn.ZIndex = 11
	decreaseBtn.Parent = amountFrame

	local decreaseTextConstraint = Instance.new("UITextSizeConstraint")
	decreaseTextConstraint.MaxTextSize = 20
	decreaseTextConstraint.Parent = decreaseBtn

	local amountLabel = Instance.new("TextLabel")
	amountLabel.Size = UDim2.new(0.4545, 0, 1, 0)
	amountLabel.Position = UDim2.new(0.2727, 0, 0, 0)
	amountLabel.BackgroundTransparency = 1
	amountLabel.Text = "1"
	amountLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
	amountLabel.TextSize = 16
	amountLabel.Font = Enum.Font.GothamBold
	amountLabel.TextScaled = true
	amountLabel.ZIndex = 11
	amountLabel.Parent = amountFrame

	local amountLabelConstraint = Instance.new("UITextSizeConstraint")
	amountLabelConstraint.MaxTextSize = 16
	amountLabelConstraint.Parent = amountLabel

	local increaseBtn = Instance.new("TextButton")
	increaseBtn.Size = UDim2.new(0.2727, 0, 1, 0)
	increaseBtn.Position = UDim2.new(0.7273, 0, 0, 0)
	increaseBtn.BackgroundTransparency = 1
	increaseBtn.Text = "+"
	increaseBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
	increaseBtn.TextSize = 20
	increaseBtn.Font = Enum.Font.GothamBold
	increaseBtn.TextScaled = true
	increaseBtn.ZIndex = 11
	increaseBtn.Parent = amountFrame

	local increaseTextConstraint = Instance.new("UITextSizeConstraint")
	increaseTextConstraint.MaxTextSize = 20
	increaseTextConstraint.Parent = increaseBtn

	local buttonsContainer = Instance.new("Frame")
	buttonsContainer.Size = UDim2.new(0.6471, 0, 1, 0)
	buttonsContainer.Position = UDim2.new(0.3529, 0, 0, 0)
	buttonsContainer.BackgroundTransparency = 1
	buttonsContainer.ZIndex = 10
	buttonsContainer.Parent = controlsRow

	local buyButton = Instance.new("TextButton")
	buyButton.Size = UDim2.new(1, 0, 0.4714, 0)
	buyButton.Position = UDim2.new(0, 0, 0, 0)
	buyButton.BackgroundColor3 = Color3.fromRGB(70, 130, 70)
	buyButton.Text = "ðŸ’° Buy - $150"
	buyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
	buyButton.TextSize = 14
	buyButton.Font = Enum.Font.GothamBold
	buyButton.TextScaled = true
	buyButton.ZIndex = 11
	buyButton.Parent = buttonsContainer

	local buyTextConstraint = Instance.new("UITextSizeConstraint")
	buyTextConstraint.MaxTextSize = 14
	buyTextConstraint.Parent = buyButton

	local buyCorner = Instance.new("UICorner")
	buyCorner.CornerRadius = UDim.new(0, 10)
	buyCorner.Parent = buyButton

	local buyStroke = Instance.new("UIStroke")
	buyStroke.Color = Color3.fromRGB(0, 0, 0)
	buyStroke.Thickness = 1
	buyStroke.Transparency = 0.7
	buyStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
	buyStroke.Parent = buyButton

	local cancelButton = Instance.new("TextButton")
	cancelButton.Size = UDim2.new(1, 0, 0.4571, 0)
	cancelButton.Position = UDim2.new(0, 0, 0.5429, 0)
	cancelButton.BackgroundColor3 = Color3.fromRGB(70, 70, 75)
	cancelButton.Text = "Cancel"
	cancelButton.TextColor3 = Color3.fromRGB(255, 255, 255)
	cancelButton.TextSize = 14
	cancelButton.Font = Enum.Font.GothamBold
	cancelButton.TextScaled = true
	cancelButton.ZIndex = 11
	cancelButton.Parent = buttonsContainer

	local cancelTextConstraint = Instance.new("UITextSizeConstraint")
	cancelTextConstraint.MaxTextSize = 14
	cancelTextConstraint.Parent = cancelButton

	local cancelCorner = Instance.new("UICorner")
	cancelCorner.CornerRadius = UDim.new(0, 10)
	cancelCorner.Parent = cancelButton

	local cancelStroke = Instance.new("UIStroke")
	cancelStroke.Color = Color3.fromRGB(0, 0, 0)
	cancelStroke.Thickness = 1
	cancelStroke.Transparency = 0.7
	cancelStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
	cancelStroke.Parent = cancelButton

	-- ==================== SHOP LOGIC ====================
	local function SEARCH_ITEM(ITEM_BUTTON, ITEM_INFO)
		local CAN_SHOW = true

		if ITEM_INFO.SpecialTags and ITEM_INFO.SpecialTags.HotspotOnly then
			return false
		end

		if string.len(searchBox.Text) > 0 then
			if not string.find(string.lower(ITEM_BUTTON:GetAttribute("ITEM_NAME")), string.lower(searchBox.Text)) then
				CAN_SHOW = false
			end
		end

		if CAN_SHOW and CURRENT_TAB ~= "AllTab" then
			if type(ITEM_INFO.ItemType) == "table" then
				if not table.find(ITEM_INFO.ItemType, CURRENT_TAB) then
					CAN_SHOW = false
				end
			else
				if ITEM_INFO.ItemType ~= CURRENT_TAB then
					CAN_SHOW = false
				end
			end
		end

		return CAN_SHOW
	end

	local function IS_ITEM_UNLOCKED(ITEM_ID)
		if INV and INV[tostring(ITEM_ID)] then
			return INV[tostring(ITEM_ID)].Unlocked == true
		end
		return false
	end

	LOAD_SHOP = function()
		INV = RepStorage.Events.GetInventoryType:InvokeServer("Items")

		for _, child in pairs(itemsScroll:GetChildren()) do
			if child:IsA("Frame") then
				child:Destroy()
			end
		end

		for _, ITEM in pairs(RepStorage.Items:GetChildren()) do
			local ITEM_INFO = require(ITEM.ItemStats)
			local isUnlocked = IS_ITEM_UNLOCKED(ITEM_INFO.ItemId)

			local itemCard = Instance.new("Frame")
			itemCard.Name = "Item" .. ITEM_INFO.ItemId
			itemCard.Size = UDim2.new(1, 0, 1, 0)
			itemCard.BackgroundColor3 = Color3.fromRGB(35, 35, 40)
			itemCard.BackgroundTransparency = 0.2
			itemCard.BorderSizePixel = 0
			itemCard.LayoutOrder = ITEM_INFO.Cost
			itemCard.ZIndex = 8
			itemCard:SetAttribute("ITEM_NAME", ITEM.Name)
			itemCard:SetAttribute("ITEM_ID", ITEM_INFO.ItemId)
			itemCard:SetAttribute("IS_UNLOCKED", isUnlocked)

			local cardCorner = Instance.new("UICorner")
			cardCorner.CornerRadius = UDim.new(0, 12)
			cardCorner.Parent = itemCard

			local cardStroke = Instance.new("UIStroke")
			cardStroke.Color = Color3.fromRGB(60, 60, 80)
			cardStroke.Thickness = 1
			cardStroke.Transparency = 0.6
			cardStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
			cardStroke.Parent = itemCard

			local itemImage = Instance.new("ImageLabel")
			itemImage.Size = UDim2.new(0.9355, 0, 0.6667, 0)
			itemImage.Position = UDim2.new(0.0323, 0, 0.0238, 0)
			itemImage.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
			itemImage.BorderSizePixel = 0
			itemImage.Image = ITEM_INFO.ThumbnailId
			itemImage.ImageTransparency = isUnlocked and 0 or 0.5
			itemImage.ZIndex = 9
			itemImage.Parent = itemCard

			local imageCorner = Instance.new("UICorner")
			imageCorner.CornerRadius = UDim.new(0, 10)
			imageCorner.Parent = itemImage

			if not isUnlocked then
				local lockIcon = Instance.new("TextLabel")
				lockIcon.Size = UDim2.new(0.3571, 0, 0.3571, 0)
				lockIcon.Position = UDim2.new(0.3214, 0, 0.3214, 0)
				lockIcon.BackgroundTransparency = 1
				lockIcon.Text = "ðŸ”’"
				lockIcon.TextSize = 35
				lockIcon.TextScaled = true
				lockIcon.ZIndex = 10
				lockIcon.Parent = itemImage

				local lockIconConstraint = Instance.new("UITextSizeConstraint")
				lockIconConstraint.MaxTextSize = 35
				lockIconConstraint.Parent = lockIcon
			end

			local itemName = Instance.new("TextLabel")
			itemName.Size = UDim2.new(0.9355, 0, 0.119, 0)
			itemName.Position = UDim2.new(0.0323, 0, 0.7143, 0)
			itemName.BackgroundTransparency = 1
			itemName.Text = ITEM.Name
			itemName.TextColor3 = Color3.fromRGB(255, 255, 255)
			itemName.TextSize = 13
			itemName.Font = Enum.Font.GothamBold
			itemName.TextXAlignment = Enum.TextXAlignment.Center
			itemName.TextTruncate = Enum.TextTruncate.AtEnd
			itemName.TextScaled = true
			itemName.ZIndex = 9
			itemName.Parent = itemCard

			local itemNameConstraint = Instance.new("UITextSizeConstraint")
			itemNameConstraint.MaxTextSize = 13
			itemNameConstraint.Parent = itemName

			local priceLabel = Instance.new("TextLabel")
			priceLabel.Size = UDim2.new(0.9355, 0, 0.1429, 0)
			priceLabel.Position = UDim2.new(0.0323, 0, 0.8333, 0)
			priceLabel.BackgroundColor3 = isUnlocked and Color3.fromRGB(70, 130, 70) or Color3.fromRGB(130, 60, 60)
			priceLabel.BorderSizePixel = 0
			priceLabel.Text = isUnlocked and ("$" .. CASH_LIB.SUFFIX_NUM(ITEM_INFO.Cost)) or "ðŸ”’ Locked"
			priceLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
			priceLabel.TextSize = 14
			priceLabel.Font = Enum.Font.GothamBold
			priceLabel.TextScaled = true
			priceLabel.ZIndex = 9
			priceLabel.Parent = itemCard

			local priceLabelConstraint = Instance.new("UITextSizeConstraint")
			priceLabelConstraint.MaxTextSize = 14
			priceLabelConstraint.Parent = priceLabel

			local priceCorner = Instance.new("UICorner")
			priceCorner.CornerRadius = UDim.new(0, 8)
			priceCorner.Parent = priceLabel

			local priceStroke = Instance.new("UIStroke")
			priceStroke.Color = Color3.fromRGB(0, 0, 0)
			priceStroke.Thickness = 1
			priceStroke.Transparency = 0.7
			priceStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
			priceStroke.Parent = priceLabel

			itemCard.Visible = SEARCH_ITEM(itemCard, ITEM_INFO)

			local clickButton = Instance.new("TextButton")
			clickButton.Size = UDim2.new(1, 0, 1, 0)
			clickButton.BackgroundTransparency = 1
			clickButton.Text = ""
			clickButton.ZIndex = 10
			clickButton.Parent = itemCard

			clickButton.MouseButton1Click:Connect(function()
				if DB then
					--SoundManager.ButtonClick()
					DB = false
					SELECTED_ITEM = ITEM
					CURRENT_COST = ITEM_INFO.Cost
					AMOUNT = 1

					selectedIcon.Image = ITEM_INFO.ThumbnailId
					selectedName.Text = ITEM.Name

					if isUnlocked then
						selectedDesc.Text = ITEM_INFO.Description
					else
						local unlockResearch = RepStorage.Events.GetItemUnlockRequirement:InvokeServer(ITEM_INFO.ItemId)
						if unlockResearch then
							selectedDesc.Text = "ðŸ”’ LOCKED: Requires " .. unlockResearch.Name .. "\n\n" .. ITEM_INFO.Description
						else
							selectedDesc.Text = "ðŸ”’ LOCKED\n\n" .. ITEM_INFO.Description
						end
					end

					amountLabel.Text = "1"

					local MainLib = require(RepStorage.Modules.MainLib)
					local tierName, tierData = MainLib.GET_ITEM_TIER_INFO(ITEM.Name)
					selectedTier.Text = tierName or ("Tier " .. ITEM_INFO.TierId)
					selectedTier.TextColor3 = tierData and tierData["TIER_COLOR"] or Color3.fromRGB(150, 150, 150)

					if isUnlocked then
						buyButton.Text = "ðŸ’° Buy - $" .. CASH_LIB.SUFFIX_NUM(ITEM_INFO.Cost)
						buyButton.BackgroundColor3 = Color3.fromRGB(70, 130, 70)
					else
						buyButton.Text = "ðŸ”’ LOCKED"
						buyButton.BackgroundColor3 = Color3.fromRGB(130, 50, 50)
					end

					selectedPanel.Visible = true
					wait(0.1)
					DB = true
				end
			end)

			clickButton.MouseEnter:Connect(function()
				script.Parent.Parent.ItemHover.ButtonHovering.Value = itemCard
			end)

			clickButton.MouseLeave:Connect(function()
				if script.Parent.Parent.ItemHover.ButtonHovering.Value == itemCard then
					script.Parent.Parent.ItemHover.ButtonHovering.Value = nil
				end
			end)

			itemCard.Parent = itemsScroll
		end

		itemsScroll.CanvasSize = UDim2.new(0, 0, 0, itemsGrid.AbsoluteContentSize.Y + 60)
	end

	-- Amount controls
	decreaseBtn.MouseButton1Click:Connect(function()
		AMOUNT = math.max(1, AMOUNT - 1)
		amountLabel.Text = tostring(AMOUNT)
		if SELECTED_ITEM then
			local ITEM_INFO = require(SELECTED_ITEM.ItemStats)
			buyButton.Text = "ðŸ’° Buy - $" .. CASH_LIB.SUFFIX_NUM(ITEM_INFO.Cost * AMOUNT)
		end
	end)

	increaseBtn.MouseButton1Click:Connect(function()
		AMOUNT = math.min(99, AMOUNT + 1)
		amountLabel.Text = tostring(AMOUNT)
		if SELECTED_ITEM then
			local ITEM_INFO = require(SELECTED_ITEM.ItemStats)
			buyButton.Text = "ðŸ’° Buy - $" .. CASH_LIB.SUFFIX_NUM(ITEM_INFO.Cost * AMOUNT)
		end
	end)

	buyButton.MouseButton1Click:Connect(function()
		if DB and SELECTED_ITEM then
			DB = false
			local ITEM_INFO = require(SELECTED_ITEM.ItemStats)

			if IS_ITEM_UNLOCKED(ITEM_INFO.ItemId) then
				local ITEM_BOUGHT = RepStorage.Events.BuyItem:InvokeServer(ITEM_INFO.ItemId, math.floor(AMOUNT))
				if ITEM_BOUGHT then
					SoundManager.Purchase()
					LOAD_SHOP()
				else
					SoundManager.Error()
				end
			else
				SoundManager.Error()
			end

			wait(0.1)
			DB = true
		end
	end)

	cancelButton.MouseButton1Click:Connect(function()
		SELECTED_ITEM = nil
		selectedPanel.Visible = false
	end)

	searchBox:GetPropertyChangedSignal("Text"):Connect(function()
		clearButton.Visible = string.len(searchBox.Text) > 0
		LOAD_SHOP()
	end)

	-- Store original jump settings
	local originalJumpPower = nil
	local originalJumpHeight = nil

	-- ==================== MAIN TAB SWITCHING LOGIC ====================
	itemsTabButton.MouseButton1Click:Connect(function()
		SoundManager.ButtonClick()
		itemsTabButton.BackgroundColor3 = Color3.fromRGB(100, 70, 140)
		upgradesTabButton.BackgroundColor3 = Color3.fromRGB(40, 40, 45)

		itemsContainer.Visible = true
		if shopFrame:FindFirstChild("UpgradesContainer") then
			shopFrame.UpgradesContainer.Visible = false
		end

		if script.Parent:FindFirstChild("UpgradeShopHandler") then
			script.Parent.UpgradeShopHandler.Enabled = false
		end
	end)

	upgradesTabButton.MouseButton1Click:Connect(function()
		SoundManager.ButtonClick()
		upgradesTabButton.BackgroundColor3 = Color3.fromRGB(100, 70, 140)
		itemsTabButton.BackgroundColor3 = Color3.fromRGB(40, 40, 45)

		itemsContainer.Visible = false
		if shopFrame:FindFirstChild("UpgradesContainer") then
			shopFrame.UpgradesContainer.Visible = true
		end

		if script.Parent:FindFirstChild("UpgradeShopHandler") then
			script.Parent.UpgradeShopHandler.Enabled = true
		end
	end)

	-- Menu toggle handler
	script.Parent.MenuObject.Changed:Connect(function()
		if script.Parent.MenuObject.Value then
			shopFrame.Visible = true
			LOAD_SHOP()

			if Plr.Character and Plr.Character:FindFirstChild("Humanoid") then
				local humanoid = Plr.Character.Humanoid

				if humanoid.UseJumpPower then
					originalJumpPower = humanoid.JumpPower
					humanoid.JumpPower = 0
				else
					originalJumpHeight = humanoid.JumpHeight
					humanoid.JumpHeight = 0
				end
			end

			if isMobile then
				GuiService:SetCoreGuiEnabled(Enum.CoreGuiType.All, false)
			end
		else
			shopFrame.Visible = false
			selectedPanel.Visible = false

			if Plr.Character and Plr.Character:FindFirstChild("Humanoid") then
				local humanoid = Plr.Character.Humanoid

				if originalJumpPower then
					humanoid.JumpPower = originalJumpPower
				end
				if originalJumpHeight then
					humanoid.JumpHeight = originalJumpHeight
				end
			end

			if isMobile then
				GuiService:SetCoreGuiEnabled(Enum.CoreGuiType.All, true)
			end
		end
	end)
end

return module
