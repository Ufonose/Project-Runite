-- ReplicatedStorage/Modules/UpgradesData.lua
-- UPDATED: Added IronMineSpeed, CopperMineSpeed, GoldMineSpeed upgrades

local UpgradesData = {}

UpgradesData.Upgrades = {
	-- === MINER SPEED UPGRADES ===
	IronMineSpeed = {
		Name = "Iron Mine Speed",
		Description = "Makes all Iron Mines produce ore 3% faster per level",
		Icon = "â›ï¸",
		BaseCost = 1, --6800k * 1.9 Max = 2194K
		CostMultiplier = 1.9,
		MaxLevel = 10,
		SortOrder = 1,
		Category = "Miners",
		GetEffectText = function(level)
			if level == 0 then
				return "Not Upgraded"
			else
				local speedIncrease = level * 3
				return "+" .. speedIncrease .. "% Speed"
			end
		end,
		ApplyEffect = function(level)
			-- Returns speed multiplier: 1 + (level * 0.05)
			-- Level 1 = 1.05x speed, Level 10 = 1.5x speed, Level 20 = 2.0x speed
			return 1 + (level * 0.03)
		end
	},

	CopperMineSpeed = {
		Name = "Copper Mine Speed",
		Description = "Makes all Copper Mines produce ore 3% faster per level",
		Icon = "â›ï¸",
		BaseCost = 1, --7900 * 1.9 Max = 2549K
		CostMultiplier = 1.9,
		MaxLevel = 10,
		SortOrder = 2,
		Category = "Miners",
		GetEffectText = function(level)
			if level == 0 then
				return "Not Upgraded"
			else
				local speedIncrease = level * 3
				return "+" .. speedIncrease .. "% Speed"
			end
		end,
		ApplyEffect = function(level)
			return 1 + (level * 0.03)
		end
	},

	GoldMineSpeed = {
		Name = "Gold Mine Speed",
		Description = "Makes all Gold Mines produce ore 3% faster per level",
		Icon = "â›ï¸",
		BaseCost = 1, --9000 * 1.9 Max = 2904K
		CostMultiplier = 1.9,
		MaxLevel = 10,
		SortOrder = 3,
		Category = "Miners",
		GetEffectText = function(level)
			if level == 0 then
				return "Not Upgraded"
			else
				local speedIncrease = level * 3
				return "+" .. speedIncrease .. "% Speed"
			end
		end,
		ApplyEffect = function(level)
			return 1 + (level * 0.03)
		end
	},

	-- === EXISTING UPGRADES ===
	ConveyorSpeed = {
		Name = "Conveyor Speed",
		Description = "Increases conveyor speed by +1 per level",
		Icon = "âž¡ï¸",
		BaseCost = 6300, --6300 * 2.3 Max = 932k
		CostMultiplier = 2.3,
		MaxLevel = 7,
		SortOrder = 4,
		Category = "Automation",
		GetEffectText = function(level)
			if level == 0 then
				return "Not Upgraded"
			else
				return "+" .. level .. " Speed"
			end
		end,
		ApplyEffect = function(level)
			return level
		end
	},

	CashBonus = {
		Name = "Cash Bonus",
		Description = "Increases cash earned from all deposits by 5% per level",
		Icon = "ðŸ’°",
		BaseCost = 1, -- 3700 * 1.4 Max = 2211K
		CostMultiplier = 1.4,
		MaxLevel = 20,
		SortOrder = 5,
		Category = "Economy",
		GetEffectText = function(level)
			if level == 0 then
				return "Not Upgraded"
			else
				return "+" .. (level * 5) .. "% Cash"
			end
		end,
		ApplyEffect = function(level)
			return 1 + (level * 0.05)
		end
	},

	GemDiscovery = {
		Name = "Gem Discovery",
		Description = "Increases gem drop rates by 10% of their base chance per level",
		Icon = "ðŸ’Ž",
		BaseCost = 1, --4600 * 1.75 Max = 708K
		CostMultiplier = 1.75,
		MaxLevel = 10,
		SortOrder = 6,
		Category = "Miners",
		GetEffectText = function(level)
			if level == 0 then
				return "Not Upgraded"
			else
				return "+" .. (level * 10) .. "% Gem Chance"
			end
		end,
		ApplyEffect = function(level)
			-- Returns multiplier for gem chances
			-- Level 1 = 1.1x (10% more), Level 10 = 2.0x (100% more)
			return 1 + (level * 0.1)
		end
	},

	DoubleDropChance = {
		Name = "Double Drop Chance",
		Description = "Adds a 1% chance per level for miners to drop double ore or gems",
		Icon = "âœ¨",
		BaseCost = 1, --8000 * 1.9 Max = 2581K
		CostMultiplier = 1.9,
		MaxLevel = 10,
		SortOrder = 7,
		Category = "Miners",
		GetEffectText = function(level)
			if level == 0 then
				return "Not Upgraded"
			else
				return level .. "% Double Drop"
			end
		end,
		ApplyEffect = function(level)
			-- Returns the percentage chance (1-10%)
			return level
		end
	},

	MovementSpeed = {
		Name = "Movement Speed",
		Description = "Increases your walking speed by +1 per level",
		Icon = "ðŸƒ",
		BaseCost = 1, --1500 * 1.4 Max = 233K
		CostMultiplier = 1.4,
		MaxLevel = 16,  -- 16 base + 16 levels = 32 max walkspeed
		SortOrder = 8,
		Category = "Quality of Life",
		GetEffectText = function(level)
			if level == 0 then
				return "Speed: 16"
			else
				return "Speed: " .. (16 + level)
			end
		end,
		ApplyEffect = function(level)
			-- Returns total walkspeed
			return 16 + level
		end
	}
}

-- Helper function to get upgrade cost at specific level
function UpgradesData.GetUpgradeCost(upgradeId, currentLevel)
	local upgradeData = UpgradesData.Upgrades[upgradeId]
	if not upgradeData then return nil end

	return math.floor(upgradeData.BaseCost * (upgradeData.CostMultiplier ^ currentLevel))
end

-- Helper function to check if upgrade is at max level
function UpgradesData.IsMaxLevel(upgradeId, currentLevel)
	local upgradeData = UpgradesData.Upgrades[upgradeId]
	if not upgradeData then return true end

	return currentLevel >= upgradeData.MaxLevel
end

-- Helper function to get total multiplier for an upgrade type
function UpgradesData.GetUpgradeMultiplier(upgradeId, level)
	local upgradeData = UpgradesData.Upgrades[upgradeId]
	if not upgradeData then return 1 end

	return upgradeData.ApplyEffect(level)
end

return UpgradesData
