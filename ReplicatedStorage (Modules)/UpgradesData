-- ReplicatedStorage/Modules/UpgradesData.lua
-- UPDATED: Added IronMineSpeed, CopperMineSpeed, GoldMineSpeed upgrades

local UpgradesData = {}

UpgradesData.Upgrades = {
	-- === MINER SPEED UPGRADES ===
	IronMineSpeed = {
		Name = "Iron Mine Speed",
		Description = "Increases ore drop speed for all Iron Mines by 5% per level",
		Icon = "â›ï¸",
		BaseCost = 1,
		CostMultiplier = 1.15,
		MaxLevel = 20,
		SortOrder = 1,
		Category = "Miners",
		GetEffectText = function(level)
			if level == 0 then
				return "Not Upgraded"
			else
				local speedIncrease = level * 5
				return "+" .. speedIncrease .. "% Speed"
			end
		end,
		ApplyEffect = function(level)
			-- Returns speed multiplier: 1 + (level * 0.05)
			-- Level 1 = 1.05x speed, Level 10 = 1.5x speed, Level 20 = 2.0x speed
			return 1 + (level * 0.05)
		end
	},

	CopperMineSpeed = {
		Name = "Copper Mine Speed",
		Description = "Increases ore drop speed for all Copper Mines by 5% per level",
		Icon = "â›ï¸",
		BaseCost = 1,
		CostMultiplier = 1.15,
		MaxLevel = 20,
		SortOrder = 2,
		Category = "Miners",
		GetEffectText = function(level)
			if level == 0 then
				return "Not Upgraded"
			else
				local speedIncrease = level * 5
				return "+" .. speedIncrease .. "% Speed"
			end
		end,
		ApplyEffect = function(level)
			return 1 + (level * 0.05)
		end
	},

	GoldMineSpeed = {
		Name = "Gold Mine Speed",
		Description = "Increases ore drop speed for all Gold Mines by 5% per level",
		Icon = "â›ï¸",
		BaseCost = 1,
		CostMultiplier = 1.15,
		MaxLevel = 20,
		SortOrder = 3,
		Category = "Miners",
		GetEffectText = function(level)
			if level == 0 then
				return "Not Upgraded"
			else
				local speedIncrease = level * 5
				return "+" .. speedIncrease .. "% Speed"
			end
		end,
		ApplyEffect = function(level)
			return 1 + (level * 0.05)
		end
	},

	-- === EXISTING UPGRADES ===
	ConveyorSpeed = {
		Name = "Conveyor Speed",
		Description = "Increases the speed of all conveyors by 1 unit per level",
		Icon = "âž¡ï¸",
		BaseCost = 1,
		CostMultiplier = 1.12,
		MaxLevel = 20,
		SortOrder = 4,
		Category = "Automation",
		GetEffectText = function(level)
			if level == 0 then
				return "Not Upgraded"
			else
				return "+" .. level .. " Speed"
			end
		end,
		ApplyEffect = function(level)
			return level
		end
	},

	CashBonus = {
		Name = "Cash Bonus",
		Description = "Increases cash earned from processed ores by 5% per level",
		Icon = "ðŸ’°",
		BaseCost = 1,
		CostMultiplier = 1.18,
		MaxLevel = 20,
		SortOrder = 5,
		Category = "Economy",
		GetEffectText = function(level)
			if level == 0 then
				return "Not Upgraded"
			else
				return "+" .. (level * 5) .. "% Cash"
			end
		end,
		ApplyEffect = function(level)
			return 1 + (level * 0.05)
		end
	}
}

-- Helper function to get upgrade cost at specific level
function UpgradesData.GetUpgradeCost(upgradeId, currentLevel)
	local upgradeData = UpgradesData.Upgrades[upgradeId]
	if not upgradeData then return nil end

	return math.floor(upgradeData.BaseCost * (upgradeData.CostMultiplier ^ currentLevel))
end

-- Helper function to check if upgrade is at max level
function UpgradesData.IsMaxLevel(upgradeId, currentLevel)
	local upgradeData = UpgradesData.Upgrades[upgradeId]
	if not upgradeData then return true end

	return currentLevel >= upgradeData.MaxLevel
end

-- Helper function to get total multiplier for an upgrade type
function UpgradesData.GetUpgradeMultiplier(upgradeId, level)
	local upgradeData = UpgradesData.Upgrades[upgradeId]
	if not upgradeData then return 1 end

	return upgradeData.ApplyEffect(level)
end

return UpgradesData
